@model Inventory.CommonViewModels.VendorVM

@{ ViewBag.Title = "Vendor";
   //Layout = "~/Views/Shared/_Layout.cshtml";

   //var test = 0; 
}


<link href="~/Content/CommonCss/Vendor.css" rel="stylesheet" />
<link href="~/Content/DatePickerCss/datepicker.min.css" rel="stylesheet" />
<script src="~/Scripts/DatePicker/moment.js"></script>
<script src="~/Scripts/DatePicker/bootstrap-datepicker.min.js"></script>
<script src="~/Scripts/DatePicker/bootstrap-datetimepicker.min.js"></script>
<script src="~/Scripts/DatePicker/en-gb.js"></script>
<script src="~/Scripts/CustomScripts/VendorProducts_table-editable.js"></script>
<script src="~/Scripts/CustomScripts/Vendor.js"></script>
<script src="~/Scripts/CustomScripts/jquery.toaster.js"></script>
<script src="~/Scripts/CustomScripts/VendoPaymentAndOrder_table-managed.js"></script>
<script src="~/Scripts/CustomScripts/bootbox.min.js"></script>
<style>
    textarea#txt_Remarks {
        resize: none;
    }
    .row.start_date .col-md-3 {
        padding-bottom: 0px;
        margin-bottom: 0px;
        padding-right: 0px;
        padding-top: 6px;
    }
    .row.start_date {
        padding-top: 15px;
    }
    .row.row_12 {
        margin-bottom: -17px;
    }
    input#btn_Clear {
        margin-top: 15px;
    }
</style>

<div class="row">
    <div class="col-md-12">
        <div class="tabbable tabbable-custom boxless tabbable-reversed">
            <ul class="nav nav-tabs">
                <li class="active">
                    <a href="#vendor_Info" data-toggle="tab">
                        Vendor Info
                    </a>
                </li>
                <li id="li_vendorProduct">
                    <a href="#vendor_Product" data-toggle="tab">
                        Vendor Products
                    </a>
                </li>
                <li id="li_orderHistory">
                    <a href="#order_History" data-toggle="tab">
                        Order History
                    </a>
                </li>
                <li id="li_paymentHistory">
                    <a href="#payment_History" data-toggle="tab">
                        Payment History
                    </a>
                </li>
            </ul>
            <!-- VENDOR INFO FORM START HERE-->
            <div class="tab-content">
                <div class="tab-pane active" id="vendor_Info">
                    <div class="portlet box green">
                        <div class="portlet-title">
                            <div class="caption">
                                Vendor
                            </div>
                            <div class="tools">
                                <a href="javascript:;" class="collapse">
                                </a>
                                <a href="#portlet-config" data-toggle="modal" class="config">
                                </a>
                                <a href="javascript:;" class="reload">
                                </a>
                                <a href="javascript:;" class="remove">
                                </a>
                            </div>
                        </div>
                        <div class="portlet-body form">
                            <!-- BEGIN FORM-->

                            <form class="form-horizontal" id="frm_NewVendor">
                                @Html.HiddenFor(Model => Model.VendorDetails.VendorId, new { @id = "hdnVendorID" })
                                <div class="form-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Name</label>
                                                <div class="col-md-9">
                                                    @Html.TextBoxFor(Model => Model.VendorDetails.Name, new { @class = "form-control", @placeholder = "Name", @id = "txt_VendorName", @manlength = "100", @data_msg_required = "Name Required!", @data_rule_required = "true" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Balance</label>
                                                <div class="col-md-9">
                                                    @Html.TextBoxFor(Model => Model.VendorDetails.Balance, new { @class = "form-control", @placeholder = "Balance", @id = "txt_Balance", @maxlength = "15" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--/row-->
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Credit</label>
                                                <div class="col-md-9">
                                                    @Html.TextBoxFor(Model => Model.VendorDetails.Credit, new { @class = "form-control", @placeholder = "Credit", @id = "txt_Credit", @maxlength = "15" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Address</label>
                                                <div class="col-md-9">
                                                    @Html.TextBoxFor(Model => Model.VendorDetails.Address1, new { @class = "form-control", @placeholder = "Address", @id = "txt_Address", @data_msg_required = "Address Required!" })
                                                </div>
                                            </div>
                                        </div>
                                        <!--/row-->
                                    </div>
                                    <!--/row-->
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Contact Name</label>
                                                <div class="col-md-9">
                                                    @Html.TextBoxFor(Model => Model.VendorDetails.ContactName, new { @class = "form-control", @placeholder = "Contact Name", @id = "txt_ContactName", @maxlength = "100" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Phone No</label>
                                                <div class="col-md-9">
                                                    @Html.TextBoxFor(Model => Model.VendorDetails.Phone, new { @class = "form-control", @placeholder = "Phone No.", @id = "txt_PhoneNo" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--/row-->
                                    <!--/row-->
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Fax</label>
                                                <div class="col-md-9">
                                                    @Html.TextBoxFor(Model => Model.VendorDetails.Fax, new { @class = "form-control", @placeholder = "Fax", @maxlength = "12", @id = "txt_Fax" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Email</label>
                                                <div class="col-md-9">
                                                    @Html.TextBoxFor(Model => Model.VendorDetails.Email, new { @class = "form-control", @placeholder = "Email", @id = "txt_Email" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--/row-->
                                    <!--/row-->
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Website</label>
                                                <div class="col-md-9">
                                                    @Html.TextBoxFor(Model => Model.VendorDetails.Website, new { @class = "form-control", @placeholder = "Website", @id = "txt_Website" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Payment</label>
                                                <div class="col-md-9">
                                                    @Html.DropDownListFor(Model => Model.VendorDetails.PaymentTerms, new SelectList(Model.VendorPaymentTermList, "PaymentTermsId", "Name"), "---Select Payment Term---", new { @id = "ddl_PaymentTerms", @class = "form-control" })
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <!--/row-->
                                    <!--/row-->
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Discount</label>
                                                <div class="col-md-9">
                                                    @Html.TextBoxFor(Model => Model.VendorDetails.Discount, new { @class = "form-control", @placeholder = "In Amount", @id = "txt_Discount" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Currency</label>
                                                <div class="col-md-9">
                                                    @Html.DropDownListFor(Model => Model.VendorDetails.Currency, new SelectList(Model.VendorCurrencyList, "CurrencyId", "Description"), "-- Select Currency --", new { @class = "form-control" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>   
                                    <!--/row-->
                                    <!--/row-->
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">TaxingScheme</label>
                                                <div class="col-md-9">
                                                    @Html.DropDownListFor(Model => Model.VendorDetails.TaxingScheme, new SelectList(Model.VendorTaxingSchemeList, "TaxingSchemeId", "Name"), "---Select Taxing Scheme---", new { @id = "ddl_TaxingScheme", @class = "form-control"})
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Remarks</label>
                                                <div class="col-md-9">
                                                    @Html.TextAreaFor(Model => Model.VendorDetails.Remarks, new { @class = "form-control", @placeholder = "Optional", @id = "txt_Remarks" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    @if (Model.VendorDetails != null)
                                    {
                                        <input type="button" class="btn btn-primary" value="Update" id="btn_Save">
                                        <a href="/Vendor/VendorList" style="margin-left:380px;">Back to VendorList</a>
                                    }
                                    else
                                    {
                                        <input type="button" class="btn btn-primary" value="Save" id="btn_Save">
                                    }
                                    <!--/row-->

                                </div>
                            </form>

                            <!-- END FORM-->
                        </div>
                    </div>
                </div>

                <!-- VENDOR INFO FORM END HERE-->
                <!-- VENDOR PRODUCTS FORM START HERE-->
                <div class="tab-pane" id="vendor_Product">
                    <div class="portlet box green">
                        <div class="portlet-title">
                            <div class="caption">
                                Vendor Products
                            </div>
                            <div class="tools">
                                <a href="javascript:;" class="collapse">
                                </a>
                                <a href="#portlet-config" data-toggle="modal" class="config">
                                </a>
                                <a href="javascript:;" class="reload">
                                </a>
                                <a href="javascript:;" class="remove">
                                </a>
                            </div>
                        </div>
                        <div class="portlet-body">
                            <div class="table-toolbar">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="btn-group">
                                            <button id="sample_editable_1_new" class="btn green">
                                                Add New <i class="fa fa-plus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <table class="table table-striped table-hover table-bordered" id="sample_editable_1">
                                <thead>
                                    <tr>
                                        <th>
                                            Item Name
                                        </th>
                                        <th>
                                            Vendor Product Code
                                        </th>
                                        <th>
                                            Vendor Price
                                        </th>
                                        <th>
                                            Edit
                                        </th>
                                        <th>
                                            Cancel
                                        </th>
                                    </tr>
                                </thead>
                                @if (Model.VendorDetails != null)
                                {
                                    <tbody>
                                        @foreach (var item in Model.VendorProductItemList)
                                        {
                                            <tr>
                                                <td class="getAllID" data-vendorid="@item.VendorId" data-productid="@item.ProdId" data-vendoritemid="@item.VendorItemId">
                                                    @item.Name
                                                <td>
                                                    @item.VendorItemCode
                                                </td>
                                                <td>
                                                    @item.Cost
                                                </td>
                                                <td>
                                                    <a class="edit" href="">
                                                        Edit
                                                    </a>
                                                </td>
                                                <td>
                                                    @*<a class="delete" href="">
                                                            Delete
                                                        </a>*@
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                }
                            </table>
                        </div>

                    </div>
                    <!-- END EXAMPLE TABLE PORTLET-->
                </div>
                <!-- VENDOR PRODUCTS FORM END HERE-->
                <!-- ORDER HISTORY FORM START HERE-->
                <div class="tab-pane" id="order_History">
                    <div class="portlet box green">
                        <div class="portlet-title">
                            <div class="caption">
                                Order History
                            </div>
                            <div class="tools">
                                <a href="javascript:;" class="collapse">
                                </a>
                                <a href="#portlet-config" data-toggle="modal" class="config">
                                </a>
                                <a href="javascript:;" class="reload">
                                </a>
                                <a href="javascript:;" class="remove">
                                </a>
                            </div>
                        </div>
                        <div class="portlet-body">
                            <table class="table table-striped table-bordered table-hover" id="VendorOrderHistory">
                                <thead>
                                    <tr>
                                        <th>
                                            Order#
                                        </th>
                                        <th>
                                            Order Date
                                        </th>
                                        <th>
                                            Status
                                        </th>
                                        <th>
                                            OrderTotal
                                        </th>
                                        <th>
                                            Amount Paid
                                        </th>
                                        <th>
                                            Balance Due
                                        </th>
                                    </tr>
                                </thead>
                                @if (Model.VendorDetails != null)
                                {
                                    <tbody>
                                        @foreach (var item in Model.VendorOrderHistoryList)
                                        {
                                            <tr class="odd gradeX">
                                                <td>
                                                    @item.OrderNumber
                                                </td>
                                                <td>
                                                    @item.OrderDate
                                                </td>
                                                <td>
                                                    @item.InventoryPaymentStatusName
                                                </td>
                                                <td>
                                                    @item.OrderTotal
                                                </td>
                                                <td>
                                                    @item.AmountPaid
                                                </td>
                                                <td>
                                                    @item.Balance
                                                   
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                }
                            </table>
                        </div>
                    </div>
                </div>
                <!-- ORDER HISTORY  FORM END HERE-->
                <!-- PAYMENT HISTORY FORM START HERE-->
               
                <div class="tab-pane" id="payment_History">
                    <div class="row row_12">
                        @*<div class="container">*@
                            <div class="col-sm-8" style="height:75px;">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="row start_date">
                                            <div class="col-md-3">
                                                  <span>Start Date</span>
                                             </div>
                                            <div class="col-md-9">
                                                <div class="start_date">
                                                    
                                                    <div class='input-group date' id='startDate'>
                                                        <input type='text' readonly class="form-control startendDate" name="startDate" id="txt_startDate"/>
                                                        <span class="input-group-addon">
                                                            <span class="glyphicon glyphicon-calendar"></span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                         </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row start_date">
                                            <div class="col-md-3">
                                                <span>End Date</span>
                                            </div>
                                            <div class="col-md-9">
                                                <div class="end_date">
                                                    <div class='input-group date' id='endDate'>
                                                        <input type='text' readonly class="form-control startendDate" name="org_endDate" id="txt_endDate" />
                                                        <span class="input-group-addon">
                                                            <span class="glyphicon glyphicon-calendar"></span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    
                                </div>
                               
                            </div>
                        <input type="button" class="btn btn-primary" value="Clear" id="btn_Clear">
                        <div class="col-sm-4" style="height:75px;">
                            
                        </div>
                        @*</div>*@
                    </div>
                    <br />
                    <div class="portlet box green">
                        <div class="portlet-title">
                            <div class="caption">
                                Payment History
                            </div>
                            <div class="tools">
                                <a href="javascript:;" class="collapse">
                                </a>
                                <a href="#portlet-config" data-toggle="modal" class="config">
                                </a>
                                <a href="javascript:;" class="reload">
                                </a>
                                <a href="javascript:;" class="remove">
                                </a>
                            </div>
                        </div>
                        <div class="portlet-body">
                       
                              <table class="table table-striped table-bordered table-hover" id="VendorPaymentHistory">
                                <thead>
                                    <tr>
                                        <th>
                                            Date
                                        </th>
                                        <th>
                                            Due Date
                                        </th>
                                        <th>
                                            Transaction
                                        </th>
                                        <th>
                                            Amount
                                        </th>
                                        @*<th>
                                            Credit Balance
                                        </th>*@
                                        <th>
                                            Balance
                                        </th>
                                    </tr>
                                </thead>
                             
                                @if (Model.VendorDetails != null)
                                {
                                    <tbody>
                                        
                                        @foreach (var item in Model.VendorOrderHistoryList)
                                        {
                                            <tr>
                                                <td>
                                                    @item.OrderDate
                                                </td>
                                                <td>
                                                    @item.DueDate
                                                </td>
                                                <td>
                                                    @item.OrderNumber
                                                </td>
                                                <td>
                                                    @item.AmountPaid
                                                   </td>                                             
                                                <td>                                                
                                                    @item.Balance
                                                </td>

                                            </tr>
                                        }
                                    </tbody>
                                }
                            </table>
                          
                        </div>
                      
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="current_days">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Current</label>
                                    <div class="col-md-8">
                                        @*@Html.TextBoxFor(Model => Model.VendorOrderHistoryList.Balance, new { @class = "form-control", @placeholder = "0.00", @id = "txt_Current",@disabled="true"})*@
                                        <input type="text" class="form-control" placeholder="0.00" id="txt_CurrentBalance" disabled>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="current_days">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Filter Days</label>
                                    <div class="col-md-8">
                                        <input type="text" id="txt_filterDays" class="form-control" placeholder="0.00" disabled>
                                    </div>
                                </div>
                                </div>
                            </div>
                        <div class="col-md-4">
                            <div class="current_days">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Due</label>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" placeholder="0.00" id="txt_DueBalance" disabled>
                                    </div>
                                </div>
                                </div>
                            </div>
                    </div>
                    <div class="row">
                        @*<div class="col-md-4">
                            <div class="current_days">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Credit</label>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" placeholder="0.00" disabled>
                                    </div>
                                </div>
                                </div>
                            </div>*@
                        @*<div class="col-md-4">
                            <div class="current_days">
                                <div class="form-group">
                                    <label class="control-label col-md-4">61+ Days</label>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" placeholder="0.00" disabled>
                                    </div>
                                </div>
                                </div>
                            </div>
                        <div class="col-md-4">
                            <div class="current_days">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Credit</label>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" placeholder="0.00" disabled>
                                    </div>
                                </div>
                                </div>
                            </div>*@
                    </div>
                </div>
                <!-- PAYMENT HISTORY FORM END HERE-->
            </div>
        </div>
    </div>
</div>


<script>
    jQuery(document).ready(function () {
        TableEditable.init();
        TableManaged.init();      
        $('#startDate').datetimepicker({
            format: "DD/MM/YYYY",
        });
        $('#endDate').datetimepicker({
            format: "DD/MM/YYYY",
        });
        $("#startDate").on("dp.change", function (e) {
            $('#endDate').data("DateTimePicker").setMinDate(e.date);
        });
        $("#endDate").on("dp.change", function (e) {
            $('#startDate').data("DateTimePicker").setMaxDate(e.date);
        });
    });

</script>